# Buffet Restaurant QR Ordering System
# à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¹‰à¸²à¸™à¸šà¸¸à¸Ÿà¹€à¸Ÿà¹ˆà¸•à¹Œà¹à¸šà¸šà¸ªà¹à¸à¸™ QR

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¹‰à¸²à¸™à¸šà¸¸à¸Ÿà¹€à¸Ÿà¹ˆà¸•à¹Œà¸„à¸£à¸šà¸§à¸‡à¸ˆà¸£ à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¹à¸à¸™ QR à¸—à¸µà¹ˆà¹‚à¸•à¹Šà¸°à¹€à¸à¸·à¹ˆà¸­à¸”à¸¹à¹€à¸¡à¸™à¸¹à¹à¸¥à¸°à¸ªà¸±à¹ˆà¸‡à¸­à¸²à¸«à¸²à¸£ à¸à¸£à¹‰à¸­à¸¡à¸£à¸°à¸šà¸šà¸«à¸¥à¸±à¸‡à¸šà¹‰à¸²à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¹‚à¸•à¹Šà¸° à¹à¸à¹‡à¸à¹€à¸à¸ˆ à¹€à¸¡à¸™à¸¹ à¸à¸²à¸£à¸‚à¸²à¸¢ à¹à¸¥à¸°à¸ªà¸¡à¸²à¸Šà¸´à¸

## âœ¨ Features / à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸

### ğŸ‘¥ à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸² (Customer)
- ğŸ“± à¸ªà¹à¸à¸™ QR Code à¸—à¸µà¹ˆà¹‚à¸•à¹Šà¸°à¹€à¸à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸¥à¹‡à¸­à¸à¸­à¸´à¸™)
- ğŸ½ï¸ à¸”à¸¹à¹€à¸¡à¸™à¸¹à¸•à¸²à¸¡à¹à¸à¹‡à¸à¹€à¸à¸ˆà¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ (Silver, Gold, Platinum)
- â±ï¸ à¸”à¸¹à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­à¹ƒà¸™à¸à¸²à¸£à¸—à¸²à¸™ (Countdown Timer)
- ğŸ›’ à¸ªà¸±à¹ˆà¸‡à¸­à¸²à¸«à¸²à¸£à¸œà¹ˆà¸²à¸™à¸£à¸°à¸šà¸šà¸•à¸°à¸à¸£à¹‰à¸²
- ğŸ“Š à¸”à¸¹à¸ªà¸–à¸²à¸™à¸°à¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¹à¸šà¸š Real-time
- ğŸ”” à¹€à¸£à¸µà¸¢à¸à¸à¸™à¸±à¸à¸‡à¸²à¸™ (Call Staff)

### ğŸ‘¨â€ğŸ’¼ à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸™à¸±à¸à¸‡à¸²à¸™ (Staff)
- ğŸ“‹ Dashboard à¹à¸ªà¸”à¸‡à¸ªà¸–à¸²à¸™à¸°à¹‚à¸•à¹Šà¸°à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- â–¶ï¸ à¹€à¸›à¸´à¸”à¸£à¸­à¸šà¸à¸²à¸£à¸™à¸±à¹ˆà¸‡ (Start Session) à¸à¸£à¹‰à¸­à¸¡à¹€à¸¥à¸·à¸­à¸à¹à¸à¹‡à¸à¹€à¸à¸ˆ
- ğŸ“± à¸ªà¸£à¹‰à¸²à¸‡ QR Code à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸¹à¸à¸„à¹‰à¸²
- ğŸ“ à¸ˆà¸±à¸”à¸à¸²à¸£à¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¹à¸¥à¸°à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°
- â° à¸”à¸¹à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¹‚à¸•à¹Šà¸°

### ğŸ’° à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸„à¸Šà¹€à¸Šà¸µà¸¢à¸£à¹Œ (Cashier)
- ğŸ§¾ à¸„à¸³à¸™à¸§à¸“à¸šà¸´à¸¥à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ (à¹à¸à¹‡à¸à¹€à¸à¸ˆ + VAT + Service Charge)
- ğŸ’³ à¸£à¸­à¸‡à¸£à¸±à¸šà¸«à¸¥à¸²à¸¢à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ (à¹€à¸‡à¸´à¸™à¸ªà¸”, à¹‚à¸­à¸™, QR PromptPay, à¸šà¸±à¸•à¸£)
- ğŸ à¹ƒà¸Šà¹‰à¸ªà¹ˆà¸§à¸™à¸¥à¸”à¹à¸¥à¸°à¹à¸•à¹‰à¸¡à¸ªà¸°à¸ªà¸¡
- ğŸ“„ à¸­à¸­à¸à¹ƒà¸šà¹€à¸ªà¸£à¹‡à¸ˆ PDF
- ğŸ‘¥ à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸¡à¸²à¸Šà¸´à¸à¹ƒà¸«à¸¡à¹ˆ

### ğŸ”§ à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸­à¸”à¸¡à¸´à¸™ (Admin)
- ğŸ“¦ à¸ˆà¸±à¸”à¸à¸²à¸£à¹à¸à¹‡à¸à¹€à¸à¸ˆ (Package Management) à¸à¸£à¹‰à¸­à¸¡à¸£à¸°à¸šà¸š Inheritance
- ğŸœ à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸¡à¸™à¸¹à¹à¸¥à¸°à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
- ğŸª‘ à¸ˆà¸±à¸”à¸à¸²à¸£à¹‚à¸•à¹Šà¸°
- ğŸ‘¤ à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¸°à¸ªà¸´à¸—à¸˜à¸´à¹Œ
- âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š (VAT%, Service Charge%, à¹à¸•à¹‰à¸¡à¸ªà¸°à¸ªà¸¡)
- ğŸ“Š à¸£à¸²à¸¢à¸‡à¸²à¸™à¸¢à¸­à¸”à¸‚à¸²à¸¢

### ğŸ¯ à¸£à¸°à¸šà¸šà¸ªà¸¡à¸²à¸Šà¸´à¸ (Loyalty Program)
- ğŸ’ à¸ªà¸°à¸ªà¸¡à¹à¸•à¹‰à¸¡à¸ˆà¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢
- ğŸ à¹à¸¥à¸à¹à¸•à¹‰à¸¡à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸¥à¸”
- ğŸ“ˆ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹ƒà¸Šà¹‰à¹à¸•à¹‰à¸¡
- ğŸ‚ à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸§à¸±à¸™à¹€à¸à¸´à¸” (à¸£à¸­à¸‡à¸£à¸±à¸šà¹ƒà¸™à¸­à¸™à¸²à¸„à¸•)

## ğŸ—ï¸ Technology Stack

### Backend
- **Framework**: NestJS (Node.js + TypeScript)
- **Database**: PostgreSQL 14+
- **ORM**: TypeORM
- **Authentication**: JWT + Bcrypt
- **File Upload**: Multer
- **QR Code**: qrcode
- **PDF**: pdfkit

### Frontend
- **Framework**: Next.js 14+ (React + TypeScript)
- **Styling**: Tailwind CSS
- **State Management**: React Context API
- **HTTP Client**: Axios
- **Real-time**: Socket.IO Client
- **Forms**: React Hook Form

### DevOps
- **Containerization**: Docker + Docker Compose
- **Version Control**: Git
- **CI/CD**: GitHub Actions (optional)

## ğŸ“ Project Structure

```
buffet-restaurant/
â”œâ”€â”€ backend/                 # NestJS Backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ auth/           # Authentication module
â”‚   â”‚   â”œâ”€â”€ users/          # User management
â”‚   â”‚   â”œâ”€â”€ packages/       # Package management
â”‚   â”‚   â”œâ”€â”€ menus/          # Menu management
â”‚   â”‚   â”œâ”€â”€ tables/         # Table management
â”‚   â”‚   â”œâ”€â”€ sessions/       # Session management
â”‚   â”‚   â”œâ”€â”€ orders/         # Order management
â”‚   â”‚   â”œâ”€â”€ billing/        # Billing & receipts
â”‚   â”‚   â”œâ”€â”€ loyalty/        # Loyalty program
â”‚   â”‚   â”œâ”€â”€ reports/        # Reports
â”‚   â”‚   â”œâ”€â”€ settings/       # Settings
â”‚   â”‚   â””â”€â”€ uploads/        # File uploads
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ migrations/     # SQL migrations
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # Next.js Frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/           # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/     # Admin pages
â”‚   â”‚   â”‚   â”œâ”€â”€ staff/     # Staff pages
â”‚   â”‚   â”‚   â”œâ”€â”€ cashier/   # Cashier pages
â”‚   â”‚   â”‚   â””â”€â”€ customer/  # Customer pages
â”‚   â”‚   â”œâ”€â”€ components/    # Reusable components
â”‚   â”‚   â”œâ”€â”€ lib/          # Utilities & API client
â”‚   â”‚   â””â”€â”€ contexts/     # React contexts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docs/                  # Documentation
â”‚   â”œâ”€â”€ DATABASE_SCHEMA.md
â”‚   â”œâ”€â”€ API_DOCUMENTATION.md
â”‚   â””â”€â”€ USER_MANUAL_TH.md
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸš€ Quick Start

### Prerequisites
- Node.js 18+ 
- PostgreSQL 14+
- npm or yarn

### 1. Clone Repository
```bash
git clone https://github.com/tiannys/buffet-restaurant.git
cd buffet-restaurant
```

### 2. Setup Database
```bash
# Create PostgreSQL database
createdb buffet_restaurant

# Run migrations
cd backend
npm install
npm run migration:run
```

### 3. Setup Backend
```bash
cd backend

# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Edit .env with your configuration
# DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME, JWT_SECRET

# Run development server
npm run start:dev
```

Backend will run on `http://localhost:3000`

### 4. Setup Frontend
```bash
cd frontend

# Install dependencies
npm install

# Copy environment file
cp .env.local.example .env.local

# Edit .env.local
# NEXT_PUBLIC_API_URL=http://localhost:3000/api/v1

# Run development server
npm run dev
```

Frontend will run on `http://localhost:3001`

### 5. Default Admin Account
```
Username: admin
Password: admin123
```

**âš ï¸ Please change the default password after first login!**

## ğŸ³ Docker Setup (Recommended)

```bash
# Start all services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop services
docker-compose down
```

Services:
- Frontend: http://localhost:3001
- Backend API: http://localhost:3000
- PostgreSQL: localhost:5432

## ğŸ“– Documentation

- [Database Schema](./docs/DATABASE_SCHEMA.md) - ER Diagram à¹à¸¥à¸°à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- [API Documentation](./docs/API_DOCUMENTATION.md) - REST API Endpoints
- [Implementation Plan](./docs/IMPLEMENTATION_PLAN.md) - à¹à¸œà¸™à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²
- [User Manual (Thai)](./docs/USER_MANUAL_TH.md) - à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

## ğŸ¯ Package Inheritance Logic

à¸£à¸°à¸šà¸šà¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸ªà¸·à¸šà¸—à¸­à¸”à¹€à¸¡à¸™à¸¹à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¹à¸à¹‡à¸à¹€à¸à¸ˆ:

```
Silver Package (à¹à¸à¹‡à¸à¹€à¸à¸ˆà¸à¸·à¹‰à¸™à¸à¸²à¸™)
  â””â”€ à¹€à¸¡à¸™à¸¹ Silver à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ (45 à¸£à¸²à¸¢à¸à¸²à¸£)

Gold Package (à¸ªà¸·à¸šà¸—à¸­à¸”à¸ˆà¸²à¸ Silver)
  â””â”€ à¹€à¸¡à¸™à¸¹ Silver (45) + à¹€à¸¡à¸™à¸¹ Gold (30) = 75 à¸£à¸²à¸¢à¸à¸²à¸£

Platinum Package (à¸ªà¸·à¸šà¸—à¸­à¸”à¸ˆà¸²à¸ Gold)
  â””â”€ à¹€à¸¡à¸™à¸¹ Silver (45) + Gold (30) + Platinum (25) = 100 à¸£à¸²à¸¢à¸à¸²à¸£
```

## ğŸ’³ Billing Calculation

```
Subtotal = (Adults Ã— Adult Price) + (Children Ã— Child Price)
Service Charge = Subtotal Ã— Service Charge %
Subtotal with Service = Subtotal + Service Charge
VAT = Subtotal with Service Ã— VAT %
Grand Total = Subtotal with Service + VAT - Discount - Points Value
```

## ğŸ Loyalty Points

- **Earn**: 1 point per 100 THB spent
- **Redeem**: 1 point = 1 THB discount
- **Minimum**: 10 points to redeem

## ğŸ” User Roles & Permissions

| Role | Permissions |
|------|-------------|
| **Admin** | Full system access |
| **Staff** | Table & order management |
| **Cashier** | Billing & receipts |
| **Kitchen** | View & update order status |
| **Manager** | Reports & analytics (read-only) |

## ğŸŒ API Endpoints

### Authentication
- `POST /api/v1/auth/login` - Login
- `POST /api/v1/auth/logout` - Logout
- `GET /api/v1/auth/me` - Get current user

### Admin
- `GET /api/v1/admin/packages` - List packages
- `POST /api/v1/admin/packages` - Create package
- `GET /api/v1/admin/menus` - List menus
- `POST /api/v1/admin/menus` - Create menu

### Staff
- `GET /api/v1/staff/tables/dashboard` - Table dashboard
- `POST /api/v1/staff/sessions/start` - Start session

### Customer (No Auth)
- `GET /api/v1/customer/session/:id` - Get session & menus
- `POST /api/v1/customer/session/:id/orders` - Place order

### Cashier
- `GET /api/v1/cashier/sessions/:id/calculate-bill` - Calculate bill
- `POST /api/v1/cashier/receipts` - Create receipt

[Full API Documentation](./docs/API_DOCUMENTATION.md)

## ğŸ§ª Testing

```bash
# Backend tests
cd backend
npm run test

# Frontend tests
cd frontend
npm run test
```

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ‘¨â€ğŸ’» Author

**Tiannys**
- GitHub: [@tiannys](https://github.com/tiannys)

## ğŸ™ Acknowledgments

- Built with â¤ï¸ for Thai buffet restaurants
- Designed for ease of use and scalability
- Open for contributions and improvements

## ğŸš§ Roadmap

- [ ] Mobile apps (iOS/Android)
- [ ] Line Notify integration
- [ ] Promotion & coupon system
- [ ] Online table reservation
- [ ] Inventory management
- [ ] Multi-language support (EN, CN, JP)
- [ ] Kitchen Display System (KDS)
- [ ] Payment gateway integration

## ğŸ“ Support

For issues and questions:
- Create an issue on GitHub
- Email: support@example.com

---

**Made with â¤ï¸ for Thai Buffet Restaurants** ğŸ‡¹ğŸ‡­
